<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Age & Gender</title>
  <style>
    body { font-family: system-ui, Arial; margin: 2rem; max-width: 700px; }
    pre { background:#f6f6f6; padding:1rem; border-radius:8px; }
    img { max-width: 256px; display:block; margin:.5rem 0; }
  </style>
</head>
<body>
  <h1>Age & Gender (demo)</h1>
  <form id="f">
    <input type="file" name="file" accept="image/*" required>
    <button>Predict</button>
  </form>
  <img id="preview" alt="">
  <pre id="out">Upload an image and click Predict…</pre>

  <script>
    const f = document.getElementById("f");
    const out = document.getElementById("out");
    const preview = document.getElementById("preview");

    f.file.onchange = () => {
      const [file] = f.file.files;
      if (!file) return;
      const url = URL.createObjectURL(file);
      preview.src = url;
    };

    f.addEventListener("submit", async (e) => {
      e.preventDefault();
      const fd = new FormData(f);
      out.textContent = "Predicting…";
      try {
        const res = await fetch("/predict", { method: "POST", body: fd });
        const json = await res.json();
        out.textContent = JSON.stringify(json, null, 2);
      } catch (err) {
        out.textContent = "Error: " + err;
      }
    });
  </script>
</body>
</html>
